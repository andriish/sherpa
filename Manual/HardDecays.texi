@node Hard decays
@section Hard decays
@cindex HARD_DECAYS
@cindex STABLE[<id>]

The handler for decays of particles produced in the hard scattering process
(e.g. W, Z, top, Higgs) can be enabled using the @option{HARD_DECAYS=1} switch.
Which particles should be treated as unstable is determined by the
@option{STABLE[<id>]} switch described in @ref{Model Parameters}.

This decay module can also be used on top of NLO matrix elements, but it does
not include any NLO corrections in the decay matrix elements themselves.

Note that the decay handler is an afterburner at the event generation level.
It does not affect the calculation and integration of the hard scattering
matrix elements at all. The total cross section is thus unaffected, i.e. one
has to multiply with the appropriate branching ratios manually if any decay
channels have been disabled. Furthermore any cuts or scale definitions are
not affected by decays at all and should be based on the inclusively produced
particles before decays.

@menu
* HDH_NO_DECAY::
* HDH_ONLY_DECAY::
* HARD_SPIN_CORRELATIONS::
* STORE_DECAY_RESULTS::
* HDH_SET_WIDTHS::
* HARD_MASS_SMEARING::
* RESOLVE_DECAYS::
* DECAY_TAU_HARD::
@end menu

@node HDH_NO_DECAY
@subsection HDH_NO_DECAY
@cindex HDH_NO_DECAY

This option allows to disable an explicit list of decay channels. For example,
to disable the hadronic decay channels of the W boson one would use:
@verbatim
HDH_NO_DECAY={24,2,-1}|{24,4,-3}|{24,16,-15}
@end verbatim
Note that the ordering of the decay products in each channel is important and
has to be identical to the ordering in the decay table printed to screen.
Multiple decay channels (also for different decaying particles) can be specified
using the @option{|} (pipe) symbol as separator. Spaces are not allowed anywere
in the list.

@node HDH_ONLY_DECAY
@subsection HDH_ONLY_DECAY
@cindex HDH_ONLY_DECAY

This option allows to restrict the decay channels of a particle to the
explicitly given list. For example, to allow only the bottom-decay mode of the
Higgs one would use
@verbatim
HDH_ONLY_DECAY={25,5,-5}
@end verbatim
Note that the ordering of the decay products in each channel is important and
has to be identical to the ordering in the decay table printed to screen.
Multiple decay channels (also for different decaying particles) can be specified
using the @option{|} (pipe) symbol as separator. Spaces are not allowed anywere
in the list.

@node HARD_SPIN_CORRELATIONS
@subsection HARD_SPIN_CORRELATIONS
@cindex HARD_SPIN_CORRELATIONS

By default, all decays are done in a factorised manner, i.e. there are no
correlations between the production and decay matrix elements of an unstable
particle. It is possible to enable spin correlations by specifying
@option{HARD_SPIN_CORRELATIONS=1}, which might come with a small performance
penalty in more complicated processes.

@node STORE_DECAY_RESULTS
@subsection STORE_DECAY_RESULTS
@cindex STORE_DECAY_RESULTS

The decay table and partial widths are calculated on-the-fly during the
initialization phase of Sherpa from the given model and its particles and
interaction vertices. To store these results in the @code{Results/Decays}
directory, one has to specify @option{STORE_DECAY_RESULTS=1}.

@node HDH_SET_WIDTHS
@subsection HDH_SET_WIDTHS
@cindex HDH_SET_WIDTHS
@cindex WIDTH[<id>]

By default, the decay handler operates independently from the particle width
specified by @option{WIDTH[<id>]}. This allows to set the unstable particle
width to zero for gauge invariance in the production matrix elements.
To use the sum of the calculated partial widths as total width for each unstable
particle instead one has to use @option{HDH_SET_WIDTHS=1}. This will overwrite
the width specified by @option{WIDTH[<id>]}.

@node HARD_MASS_SMEARING
@subsection HARD_MASS_SMEARING
@cindex HARD_MASS_SMEARING

If @option{HARD_MASS_SMEARING=1} is specified, the kinematic mass of the unstable
propagator is distributed according to a Breit-Wigner shape a posteriori. All
matrix elements are still calculated in the narrow-width approximation with
onshell particles. Only the kinematics are affected.

@node RESOLVE_DECAYS
@subsection RESOLVE_DECAYS
@cindex RESOLVE_DECAYS

There are different options how to decide when a 1->2 process should be replaced
by the respective 1->3 processes built from its decaying daughter particles.

@table @option
@item RESOLVE_DECAYS=Threshold
(default)
Only when the sum of decay product masses exceeds the decayer mass.
@item RESOLVE_DECAYS=ByWidth
As soon as the sum of 1->3 partial widths exceeds the 1->2 partial width.
@item RESOLVE_DECAYS=None
No 1->3 decays are taken into account.
@end table

@node DECAY_TAU_HARD
@subsection DECAY_TAU_HARD
@cindex DECAY_TAU_HARD

By default, the tau lepton is decayed by the hadron decay module,
@ref{Hadron decays}, which includes not only the leptonic decay channels but
also the hadronic modes. If @option{DECAY_TAU_HARD=1} is specified, the tau
lepton will be decayed in the hard decay handler, which only takes leptonic and
partonic decay modes into account. Note, that in this case the tau needs to also
be set massive with @option{MASSIVE[15]=1}.
