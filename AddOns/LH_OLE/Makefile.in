SHERPA_INSTALL=@prefix@

SOURCES=LH_OLE_Interface.C LH_OLE_Communicator.C

CC=g++
CXXFLAGS=-g -O2 -pedantic -Wall -fPIC -DPIC

CXXFLAGS+= -I$(shell $(SHERPA_INSTALL)/bin/Sherpa-config --incdir)
LDFLAGS=$(shell $(SHERPA_INSTALL)/bin/Sherpa-config --ldflags)

OBJECTS=$(SOURCES:.C=.o)

all: $(SOURCES) $(OBJECTS) 
	$(CC) -shared -o libLHOLE.so $(OBJECTS) $(LDFLAGS)

.C.o:
	$(CC) $(CXXFLAGS) -c $< -o $@

clean:
	rm -rf $(OBJECTS) libLHOLE.so
