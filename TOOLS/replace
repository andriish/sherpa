# replaces expression $OLD with $NEW
# in all files matching the extension $EXT
# residing in the directory $DIR and subdirectories

DIR=$1
EXT=$2
OLD=$3
NEW=$4

travel () {
  for file in $1/*; do
    if [ -d $file ]; then
      travel $file
    else 
      for extension in $EXT; do
	test=${file%$extension} 
        if [ "$file" != "$test" ]; then
	  echo " currently replacing '$OLD' with '$NEW' in $file"
          sed 's/'$OLD'/'$NEW'/g' < $file > $file.new
          \mv $file.new $file 
        fi
      done
    fi
  done
}

travel $DIR

